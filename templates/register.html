<!-- home/quan05/doan/templates/register.html -->
{% extends "base.html" %}
{% block title %}ÄÄƒng kÃ½ tÃ i khoáº£n{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 40px auto; padding: 30px; border: 1px solid #ddd; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">

    <h2 style="text-align: center; margin-bottom: 20px;">ğŸ“ ÄÄƒng kÃ½ tÃ i khoáº£n má»›i</h2>
    <p style="text-align: center; color: #666; margin-bottom: 30px;">
        Vui lÃ²ng chá»n vai trÃ² vÃ  Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin. TÃ i khoáº£n sáº½ cáº§n quáº£n trá»‹ viÃªn phÃª duyá»‡t Ä‘á»ƒ kÃ­ch hoáº¡t.
    </p>

    <form method="POST" action="{{ url_for('auth.register') }}">
        <!-- ==================== CÃC TRÆ¯á»œNG CHUNG ==================== -->
        <div class="form-group">
            <label for="full_name">Há» vÃ  TÃªn:</label>
            <input type="text" id="full_name" name="full_name" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="email">Email (dÃ¹ng Ä‘á»ƒ Ä‘Äƒng nháº­p):</label>
            <input type="email" id="email" name="email" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="password">Máº­t kháº©u:</label>
            <input type="password" id="password" name="password" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="confirm_password">XÃ¡c nháº­n Máº­t kháº©u:</label>
            <input type="password" id="confirm_password" name="confirm_password" class="form-control" required>
        </div>
        
        <!-- ==================== CHá»ŒN VAI TRÃ’ ==================== -->
        <div class="form-group">
            <label for="role">TÃ´i lÃ :</label>
            <select id="role" name="role" class="form-control" onchange="toggleRoleFields()">
                <option value="">-- Vui lÃ²ng chá»n vai trÃ² --</option>
                <option value="patient">ğŸ‘¤ Bá»‡nh nhÃ¢n</option>
                <option value="doctor">ğŸ‘¨â€âš•ï¸ BÃ¡c sÄ©</option>
            </select>
        </div>
        
        <!-- ======================================================= -->
        <!-- == KHá»I THÃ”NG TIN DÃ€NH RIÃŠNG CHO Bá»†NH NHÃ‚N (áº¨N BAN Äáº¦U) == -->
        <!-- ======================================================= -->
        <div id="patient-fields" class="role-specific-fields" style="display: none;">
            <p style="font-weight: bold; color: #27ae60; border-bottom: 2px solid #27ae60; padding-bottom: 5px; margin-bottom: 15px;">ThÃ´ng tin Bá»‡nh nhÃ¢n</p>
            <div class="form-group">
                <label for="dob">NgÃ y sinh:</label>
                <input type="date" id="dob" name="dob" class="form-control">
            </div>
            <div class="form-group">
                <label for="national_id">Sá»‘ CCCD/Passport:</label>
                <input type="text" id="national_id" name="national_id" class="form-control">
            </div>
            <div class="form-group">
                <label for="insurance_number">Sá»‘ Tháº» Báº£o hiá»ƒm Y táº¿:</label>
                <input type="text" id="insurance_number" name="insurance_number" class="form-control">
            </div>
            <div class="form-group">
                <label for="emergency_contact">SÄT NgÆ°á»i thÃ¢n (kháº©n cáº¥p):</label>
                <input type="tel" id="emergency_contact" name="emergency_contact" class="form-control">
            </div>
        </div>
        
        <!-- ===================================================== -->
        <!-- == KHá»I THÃ”NG TIN DÃ€NH RIÃŠNG CHO BÃC SÄ¨ (áº¨N BAN Äáº¦U) == -->
        <!-- ===================================================== -->
        <div id="doctor-fields" class="role-specific-fields" style="display: none;">
            <p style="font-weight: bold; color: #3498db; border-bottom: 2px solid #3498db; padding-bottom: 5px; margin-bottom: 15px;">ThÃ´ng tin BÃ¡c sÄ©</p>
            <div class="form-group">
                <label for="department">ChuyÃªn khoa:</label>
                <select id="department" name="department" class="form-control">
                    <option value="Cardiology">â¤ï¸ Khoa Tim máº¡ch</option>
                    <option value="Neurology">ğŸ§  Khoa Tháº§n kinh</option>
                    <option value="Emergency">ğŸš¨ Khoa Cáº¥p cá»©u</option>
                </select>
            </div>
            <div class="form-group">
                <label for="license_number">MÃ£ sá»‘ Chá»©ng chá»‰ HÃ nh nghá»:</label>
                <input type="text" id="license_number" name="license_number" class="form-control">
            </div>
             <div class="form-group">
                <label for="hospital">Bá»‡nh viá»‡n/NÆ¡i cÃ´ng tÃ¡c:</label>
                <input type="text" id="hospital" name="hospital" class="form-control">
            </div>
        </div>

        <button class="btn btn-success" type="submit" style="width: 100%; padding: 12px; font-size: 1.1em;">HoÃ n táº¥t ÄÄƒng kÃ½</button>
    </form>

    <div style="text-align: center; margin-top: 20px;">
        <p>ÄÃ£ cÃ³ tÃ i khoáº£n? <a href="{{ url_for('auth.login') }}">ÄÄƒng nháº­p ngay</a>.</p>
    </div>

</div>
{% endblock %}

{% block scripts %}
<script>
    function toggleRoleFields() {
        const role = document.getElementById('role').value;
        const patientFields = document.getElementById('patient-fields');
        const doctorFields = document.getElementById('doctor-fields');
        
        // Láº¥y táº¥t cáº£ cÃ¡c input trong tá»«ng khá»‘i
        const patientInputs = patientFields.querySelectorAll('input, select');
        const doctorInputs = doctorFields.querySelectorAll('input, select');

        // Máº·c Ä‘á»‹nh áº©n táº¥t cáº£ vÃ  bá» yÃªu cáº§u báº¯t buá»™c nháº­p
        patientFields.style.display = 'none';
        patientInputs.forEach(input => input.required = false);
        
        doctorFields.style.display = 'none';
        doctorInputs.forEach(input => input.required = false);

        // Hiá»ƒn thá»‹ vÃ  Ä‘áº·t yÃªu cáº§u báº¯t buá»™c nháº­p cho vai trÃ² Ä‘Æ°á»£c chá»n
        if (role === 'patient') {
            patientFields.style.display = 'block';
            patientInputs.forEach(input => input.required = true);
        } else if (role === 'doctor') {
            doctorFields.style.display = 'block';
            doctorInputs.forEach(input => input.required = true);
        }
    }
</script>
{% endblock %}